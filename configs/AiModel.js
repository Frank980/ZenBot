
const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export  const chatSession = model.startChat({
    generationConfig,
 // safetySettings: Adjust safety settings
 // See https://ai.google.dev/gemini-api/docs/safety-settings
    history: [
      // {
      //   role: "user",
      //   parts: [
      //     {text: "I have a Date in 5 days. I am bad and worried about my Time Management Issues and worry2 and worry3. I want to improve my confidence and achieve success and I want to look good. Please provide me with a day-to-day plan and activities to perform in JSON format\n"},
      //   ],
      // },
      // {
      //   role: "model",
      //   parts: [
      //     {text: "It's great that you're taking proactive steps to feel more confident and prepared for your date! Here's a JSON formatted plan to help you manage your time, address your worries, and boost your self-assurance:\n\n```json\n{\n  \"date\": \"5 days\",\n  \"goals\": [\n    \"Improve Time Management\",\n    \"Address Worry 2\",\n    \"Address Worry 3\",\n    \"Boost Confidence\",\n    \"Prepare for Date\"\n  ],\n  \"schedule\": {\n    \"Day 1\": {\n      \"Morning\": [\n        {\"activity\": \"Mindful Morning Routine\", \"description\": \"Start the day with meditation or deep breathing exercises (10 minutes).\"},\n        {\"activity\": \"Time Audit\", \"description\": \"Track how you spend your time for the next 24 hours to identify areas for improvement.\"},\n        {\"activity\": \"Healthy Breakfast\", \"description\": \"Fuel your body with a nutritious meal.\"}\n      ],\n      \"Afternoon\": [\n        {\"activity\": \"Plan Your Week\", \"description\": \"Create a realistic schedule for the next 7 days, including time for work/school, self-care, and date prep.\"},\n        {\"activity\": \"Tackle One Worry\", \"description\": \"Choose one of your worries and brainstorm solutions or create a plan to address it.\"},\n        {\"activity\": \"Active Break\", \"description\": \"Get some exercise (walk, run, yoga) for at least 30 minutes.\"}\n      ],\n      \"Evening\": [\n        {\"activity\": \"Self-Care\", \"description\": \"Engage in a relaxing activity like reading, taking a bath, or listening to music.\"},\n        {\"activity\": \"Positive Affirmations\", \"description\": \"Write down positive affirmations about your strengths and what you're grateful for.\"},\n        {\"activity\": \"Early Bedtime\", \"description\": \"Aim for 7-8 hours of sleep.\"}\n      ]\n    },\n    \"Day 2\": {\n      \"Morning\": [\n        {\"activity\": \"Mindful Morning Routine\", \"description\": \"Repeat morning routine from Day 1.\"},\n        {\"activity\": \"Review Schedule\", \"description\": \"Check your weekly schedule and make adjustments as needed.\"},\n        {\"activity\": \"Healthy Breakfast\", \"description\": \"Enjoy a nourishing breakfast.\"}\n      ],\n      \"Afternoon\": [\n        {\"activity\": \"Tackle Another Worry\", \"description\": \"Work on a different worry from your list.\"},\n        {\"activity\": \"Creative Outlet\", \"description\": \"Engage in a hobby or activity that brings you joy and creativity.\"},\n        {\"activity\": \"Social Connection\", \"description\": \"Connect with friends or family for a positive social interaction.\"}\n      ],\n      \"Evening\": [\n        {\"activity\": \"Date Outfit Inspiration\", \"description\": \"Browse outfits for your date and create a few looks you like.\"},\n        {\"activity\": \"Self-Reflection\", \"description\": \"Take time to reflect on your progress and celebrate your achievements so far.\"},\n        {\"activity\": \"Early Bedtime\", \"description\": \"Aim for 7-8 hours of sleep.\"}\n      ]\n    },\n    \"Day 3\": {\n      \"Morning\": [\n        {\"activity\": \"Mindful Morning Routine\", \"description\": \"Repeat morning routine from Day 1.\"},\n        {\"activity\": \"Review Schedule\", \"description\": \"Check your weekly schedule and make adjustments as needed.\"},\n        {\"activity\": \"Healthy Breakfast\", \"description\": \"Enjoy a nourishing breakfast.\"}\n      ],\n      \"Afternoon\": [\n        {\"activity\": \"Confidence Boosting Activity\", \"description\": \"Engage in an activity that makes you feel confident and empowered (public speaking, volunteering, etc.).\"},\n        {\"activity\": \"Plan Date Conversation\", \"description\": \"Think about potential conversation topics and questions you'd like to ask on the date.\"},\n        {\"activity\": \"Active Break\", \"description\": \"Get some exercise (walk, run, yoga) for at least 30 minutes.\"}\n      ],\n      \"Evening\": [\n        {\"activity\": \"Relaxing Evening\", \"description\": \"Enjoy a relaxing activity like reading, taking a bath, or watching a movie.\"},\n        {\"activity\": \"Prepare for Date\", \"description\": \"Finalize your outfit and ensure everything is ready for your date.\"},\n        {\"activity\": \"Early Bedtime\", \"description\": \"Aim for 7-8 hours of sleep.\"}\n      ]\n    },\n    \"Day 4\": {\n      \"Morning\": [\n        {\"activity\": \"Mindful Morning Routine\", \"description\": \"Repeat morning routine from Day 1.\"},\n        {\"activity\": \"Review Schedule\", \"description\": \"Check your weekly schedule and make adjustments as needed.\"},\n        {\"activity\": \"Healthy Breakfast\", \"description\": \"Enjoy a nourishing breakfast.\"}\n      ],\n      \"Afternoon\": [\n        {\"activity\": \"Positive Self-Talk\", \"description\": \"Practice positive self-talk and remind yourself of your strengths and accomplishments.\"},\n        {\"activity\": \"Date Practice\", \"description\": \"If comfortable, practice a few conversation starters or scenarios you might encounter on the date.\"},\n        {\"activity\": \"Active Break\", \"description\": \"Get some exercise (walk, run, yoga) for at least 30 minutes.\"}\n      ],\n      \"Evening\": [\n        {\"activity\": \"Pampering Session\", \"description\": \"Treat yourself to a spa treatment or create a relaxing home spa experience.\"},\n        {\"activity\": \"Visualize Success\", \"description\": \"Visualize yourself having a positive and enjoyable date.\"},\n        {\"activity\": \"Early Bedtime\", \"description\": \"Aim for 7-8 hours of sleep.\"}\n      ]\n    },\n    \"Day 5\": {\n      \"Morning\": [\n        {\"activity\": \"Mindful Morning Routine\", \"description\": \"Repeat morning routine from Day 1.\"},\n        {\"activity\": \"Review Schedule\", \"description\": \"Check your weekly schedule and make adjustments as needed.\"},\n        {\"activity\": \"Healthy Breakfast\", \"description\": \"Enjoy a nourishing breakfast.\"}\n      ],\n      \"Afternoon\": [\n        {\"activity\": \"Get Ready\", \"description\": \"Get ready for your date and choose your outfit.\"},\n        {\"activity\": \"Relax and Breathe\", \"description\": \"Take some time to relax and center yourself before your date.\"},\n        {\"activity\": \"Positive Thoughts\", \"description\": \"Focus on positive thoughts and remember your strengths and accomplishments.\"}\n      ],\n      \"Evening\": {\n        \"activity\": \"Date Time\", \"description\": \"Enjoy your date!\"\n      }\n    }\n  }\n}\n```\n\n**Key Points:**\n\n* **Mindful Morning Routine:** Start each day with meditation or deep breathing to manage stress and increase focus.\n* **Time Management:** Identify time wasters and create a realistic schedule to prioritize tasks.\n* **Worry Addressing:** Break down your worries and brainstorm solutions. \n* **Confidence Boosting:** Engage in activities that make you feel empowered and capable. \n* **Self-Care:** Prioritize your well-being with relaxing activities and healthy choices.\n* **Date Preparation:**  Plan your outfit, practice conversation, and visualize success.\n\n**Important Notes:**\n\n* **Customize:**  Feel free to adjust this schedule to fit your needs and preferences.\n* **Be Kind to Yourself:** This is a journey, and it's okay to have ups and downs. Be patient and celebrate your progress.\n* **Seek Support:** If your worries are overwhelming, consider talking to a therapist or counselor for professional guidance. \n\nRemember, you are capable and worthy.  Take these steps to prepare for your date, and have a wonderful time!"},
      //   ],
      // },

      {
        role: "user",
        parts: [
          {text: "I am going through a bad phase as I had a breakup with my girlfriend, My current stress level on a scale of 0 to 10 is 5, I slept 5 hours last night, I had high anxiety/panic attacks 3 times yesterday, I had a 2 level of Social Interaction on a scale of 0 to 10, My thought patterns were inconsistent with a value of 8 on a scale of 0 to 10, I had headache yesterday, I use nothing for my mental health, and I have conference approaching. Your name is Buddy and you are a trained mental health wellness instructor who has read the following books: The Body Keeps the Score, Be Calm: Proven Techniques to Stop Anxiety Now, Atomic Habits, “Light on Yoga” By B K S Iyenger, “A practical guide to Meditation” by OSHO, Eckhart Tolle's Power Of Now, It Didn't Start With You -Mark Wolynn, On Being A Therapist - Jeffrey Kottler, Pedagogy of the Oppressed by Paulo Freire and Louis Cozolino's making of a therapist and development of a therapist. Now you help me with generating my todays to-do list for my mental wellness, the list may include, How much water to drink, What type of meditation to perform and for what duration, what kind of activities I should be doing, whom to talk to, more activities for my mental wellness improvement in a perfect JSON format without missing any commas, the JSON should have the following structure: today's_wellness_plan object and this object should contain activities in activities object and then in every activity object we should have activity and rationale, This should be the structure and it should maintain uniformity"},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "```json\n{\n  \"today's_wellness_plan\": {\n    \"activities\": [\n      {\n        \"activity\": \"Drink 3 liters of water throughout the day.\",\n        \"rationale\": \"Dehydration can exacerbate stress and anxiety.  Staying hydrated supports optimal brain function and overall well-being. (Inspired by mindful awareness of the body from *The Body Keeps the Score*)\"\n      },\n      {\n        \"activity\": \"Practice mindful breathing for 10 minutes in the morning and 10 minutes before bed.\",\n        \"rationale\": \"Mindful breathing helps regulate the nervous system, reduces anxiety, and promotes calmness. (*Be Calm* and *The Power of Now* emphasize the importance of present moment awareness through breath.)\"\n      },\n      {\n        \"activity\": \"Perform a 20-minute guided loving-kindness meditation.\",\n        \"rationale\": \"This type of meditation cultivates feelings of compassion and connection, which can be helpful during emotional distress. (Drawing on meditation practices from *A Practical Guide to Meditation* by Osho.)\"\n      },\n      {\n        \"activity\": \"Gentle Yoga and stretching for 30 minutes (e.g., child's pose, cat-cow, forward folds). Focus on the breath and body sensations.\",\n        \"rationale\": \"Yoga combines physical postures with breathwork and mindfulness, releasing tension in the body and promoting relaxation. (*Light on Yoga* emphasizes the therapeutic benefits of yoga.)\"\n      },\n      {\n        \"activity\": \"Go for a 20-minute walk in nature, paying attention to the sights, sounds, and smells around you.\",\n        \"rationale\": \"Connecting with nature has a calming effect and can help shift focus away from negative thoughts. (Mindfulness techniques inspired by *The Power of Now*.)\"\n      },\n      {\n        \"activity\": \"Journal your thoughts and feelings for 15 minutes.\",\n        \"rationale\": \"Journaling can help process emotions and identify thought patterns. This can offer insights into the breakup and promote emotional regulation. (Self-reflection encouraged by therapeutic approaches in *On Being a Therapist* and *The Making of a Therapist*.)\"\n      },\n      {\n        \"activity\": \"Connect with a supportive friend or family member. Share your feelings and concerns.\",\n        \"rationale\": \"Social connection is vital for mental well-being. Talking to someone you trust can provide emotional support and reduce feelings of isolation.  (Recognizing the importance of human connection from *Pedagogy of the Oppressed* in a therapeutic context.)\"\n      },\n      {\n        \"activity\": \"Prepare a healthy and nourishing meal. Focus on the process of cooking and savor the flavors.\",\n        \"rationale\": \"Engaging in a mindful activity like cooking can be grounding and offer a sense of accomplishment. (Promoting self-care through mindful activities, drawing inspiration from *Atomic Habits* for building positive routines.)\"\n      },\n      {\n        \"activity\": \"Limit screen time and social media exposure for at least 2 hours before bed.\",\n        \"rationale\": \"Excessive screen time can interfere with sleep and increase anxiety. Creating a calming pre-sleep routine is essential for restful sleep. (Prioritizing healthy sleep habits inspired by *Be Calm*.)\"\n      },\n      {\n        \"activity\": \"Start working on ONE small task related to your conference preparation.\",\n        \"rationale\": \"Taking small, manageable steps can reduce feelings of overwhelm and build confidence. This can also help redirect your focus towards a positive goal. (*Atomic Habits* advocates for small, incremental changes.)\"\n      }\n    ]\n  }\n}\n```\n"},
        ],
      },

     
    ],
  });

  // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
  // console.log(result.response.text());
